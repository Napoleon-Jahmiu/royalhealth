<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" media="screen and (max-width: 768px) " href="css/mobile.css">
    <link rel="stylesheet" href="font/css/all.css">
    <link rel="stylesheet" href="font/css/all.min.css">
    <link rel="stylesheet" href="font/css/fontawesome.min.css">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <title>Royal-Health/Payment</title>
</head>

<body>
    
<section id="payment">
    <div class="payments container">
        
        <div class="pay">
        <h1>Pay With Paystack</h1>

        <div><img src="./img/paymentgate.png" alt="Paystack Payment"></div>
        <form >
            <script src="https://js.paystack.co/v1/inline.js"></script>
            <button type="button" onclick="payWithPaystack()"> Pay Now </button> 
            </form>
        
        </div>


        <div class="pay">
        <h1>Pay With FlutterWave</h1>
        <div class="flutter"><img src="./img/rave.png" alt=""></div>
        <form>
            <script src="https://api.ravepay.co/flwv3-pug/getpaidx/api/flwpbf-inline.js"></script>
            <button type="button" onClick="payWithRave()">Pay Now</button>
        </form>
        </div>    
    </div>

    
</section>
<footer class="footer">
    <p>Copyright &copy; D'Fleex 2019. All Rights Reserved.</p>
</footer>



<script>
    function payWithPaystack(){
      var handler = PaystackPop.setup({
        key: 'pk_test_77b31b8f3ebf740c3220d053e6dc8a173215d933',
        email: 'fleexinnovations@gmail.com',
        amount: 200000,
        currency: "NGN",
        ref: ''+Math.floor((Math.random() * 1000000000) + 1), // generates a pseudo-unique reference. Please replace with a reference you generated. Or remove the line entirely so our API will generate one for you
        metadata: {
           custom_fields: [
              {
                  display_name: "Mobile Number",
                  variable_name: "mobile_number",
                  value: "+2348012345678"
              }
           ]
        },
        callback: function(response){
            alert('success. transaction ref is ' + response.reference);
        },
        onClose: function(){
            alert('window closed');
        }
      });
      handler.openIframe();
    }
  </script>
    


<script>
    const API_publicKey = "FLWPUBK-527710ff2b03df016c454c9eae44082c-X";

    function payWithRave() {
        var x = getpaidSetup({
            PBFPubKey: API_publicKey,
            customer_email: "user@example.com",
            amount: 2000,
            customer_phone: "234099940409",
            currency: "NGN",
            txref: "rave-123456",
            meta: [{
                metaname: "flightID",
                metavalue: "AP1234"
            }],
            onclose: function() {},
            callback: function(response) {
                var txref = response.data.txRef; // collect txRef returned and pass to a 					server page to complete status check.
                console.log("This is the response returned after a charge", response);
                if (
                    response.data.chargeResponseCode == "00" ||
                    response.data.chargeResponseCode == "0"
                ) {
                    // redirect to a success page
                } else {
                    // redirect to a failure page.
                }

                x.close(); // use this to close the modal immediately after payment.
            }
        });
    }
</script>
    
</body>